using Google.Apis.Http;
using Microsoft.AspNetCore.Builder;


namespace webapi
{
    public static class StreetAutocomleteQuery
    {
        public static WebApplication GetStreetAutocomplete(this WebApplication app)
        {
            app.MapGet("/api/streetautocompletedata", async (string address, System.Net.Http.IHttpClientFactory httpClientFactory) =>
            {

                var json2 = "{\r\n    \"predictions\": [\r\n        {\r\n            \"description\": \"Умань, Cherkasy Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 5,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJ17G7ibsN0kARUZkv1IAsMUg\",\r\n            \"reference\": \"ChIJ17G7ibsN0kARUZkv1IAsMUg\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Умань\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 5,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Cherkasy Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Умань\"\r\n                },\r\n                {\r\n                    \"offset\": 7,\r\n                    \"value\": \"Cherkasy Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 24,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"locality\",\r\n                \"political\",\r\n                \"geocode\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Умань, Nebesnoi Sotni Street, Uman', Cherkasy Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 5,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJb36yJ6QN0kARIZJ55ya1q60\",\r\n            \"reference\": \"ChIJb36yJ6QN0kARIZJ55ya1q60\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Умань\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 5,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Nebesnoi Sotni Street, Uman', Cherkasy Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Умань\"\r\n                },\r\n                {\r\n                    \"offset\": 7,\r\n                    \"value\": \"Nebesnoi Sotni Street\"\r\n                },\r\n                {\r\n                    \"offset\": 30,\r\n                    \"value\": \"Uman'\"\r\n                },\r\n                {\r\n                    \"offset\": 37,\r\n                    \"value\": \"Cherkasy Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 54,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"lodging\",\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Умань плаза, Hor'koho Street, Uman', Cherkasy Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 5,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJZcPeQ2YM0kARFlWkZ8zygto\",\r\n            \"reference\": \"ChIJZcPeQ2YM0kARFlWkZ8zygto\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Умань плаза\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 5,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Hor'koho Street, Uman', Cherkasy Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Умань плаза\"\r\n                },\r\n                {\r\n                    \"offset\": 13,\r\n                    \"value\": \"Hor'koho Street\"\r\n                },\r\n                {\r\n                    \"offset\": 30,\r\n                    \"value\": \"Uman'\"\r\n                },\r\n                {\r\n                    \"offset\": 37,\r\n                    \"value\": \"Cherkasy Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 54,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"shopping_mall\",\r\n                \"cafe\",\r\n                \"lodging\",\r\n                \"food\",\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Уманьпиво, Uspenska Street, Uman', Cherkasy Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 5,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJb6vfBqkN0kARu_TtrNq8CGU\",\r\n            \"reference\": \"ChIJb6vfBqkN0kARu_TtrNq8CGU\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Уманьпиво\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 5,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Uspenska Street, Uman', Cherkasy Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Уманьпиво\"\r\n                },\r\n                {\r\n                    \"offset\": 11,\r\n                    \"value\": \"Uspenska Street\"\r\n                },\r\n                {\r\n                    \"offset\": 28,\r\n                    \"value\": \"Uman'\"\r\n                },\r\n                {\r\n                    \"offset\": 35,\r\n                    \"value\": \"Cherkasy Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 52,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"liquor_store\",\r\n                \"food\",\r\n                \"point_of_interest\",\r\n                \"store\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Умань Пиво, Akademika Vernads'koho Boulevard, Kyiv, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 5,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJE0xsF2HN1EARHBZM8clSjb0\",\r\n            \"reference\": \"ChIJE0xsF2HN1EARHBZM8clSjb0\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Умань Пиво\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 5,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Akademika Vernads'koho Boulevard, Kyiv, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Умань Пиво\"\r\n                },\r\n                {\r\n                    \"offset\": 12,\r\n                    \"value\": \"Akademika Vernads'koho Boulevard\"\r\n                },\r\n                {\r\n                    \"offset\": 46,\r\n                    \"value\": \"Kyiv\"\r\n                },\r\n                {\r\n                    \"offset\": 52,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"supermarket\",\r\n                \"grocery_or_supermarket\",\r\n                \"food\",\r\n                \"point_of_interest\",\r\n                \"store\",\r\n                \"establishment\"\r\n            ]\r\n        }\r\n    ],\r\n    \"status\": \"OK\"\r\n}";
                var json3 = "{\r\n    \"predictions\": [\r\n        {\r\n            \"description\": \"Буковель, Ivano-Frankivsk Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 8,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJDes4Yw0YN0cRtMhbgLFEIQo\",\r\n            \"reference\": \"ChIJDes4Yw0YN0cRtMhbgLFEIQo\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Буковель\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 8,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Ivano-Frankivsk Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Буковель\"\r\n                },\r\n                {\r\n                    \"offset\": 10,\r\n                    \"value\": \"Ivano-Frankivsk Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 34,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"locality\",\r\n                \"political\",\r\n                \"geocode\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Буковель, Bukovel, Ivano-Frankivsk Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 8,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJx3Viy3oYN0cRc8wkg1Sy-Kw\",\r\n            \"reference\": \"ChIJx3Viy3oYN0cRc8wkg1Sy-Kw\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Буковель\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 8,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Bukovel, Ivano-Frankivsk Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Буковель\"\r\n                },\r\n                {\r\n                    \"offset\": 10,\r\n                    \"value\": \"Bukovel\"\r\n                },\r\n                {\r\n                    \"offset\": 19,\r\n                    \"value\": \"Ivano-Frankivsk Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 43,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"tourist_attraction\",\r\n                \"lodging\",\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Буковель Готелі, Bukovel, Ivano-Frankivsk Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 8,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJ5ZaQBTAZN0cR6ikdbbvaNFs\",\r\n            \"reference\": \"ChIJ5ZaQBTAZN0cR6ikdbbvaNFs\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Буковель Готелі\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 8,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Bukovel, Ivano-Frankivsk Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Буковель Готелі\"\r\n                },\r\n                {\r\n                    \"offset\": 17,\r\n                    \"value\": \"Bukovel\"\r\n                },\r\n                {\r\n                    \"offset\": 26,\r\n                    \"value\": \"Ivano-Frankivsk Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 50,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"lodging\",\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Буковель, Polyanytsya, Ivano-Frankivsk Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 8,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJAxAj4aYiN0cRC5BX2nR1md4\",\r\n            \"reference\": \"ChIJAxAj4aYiN0cRC5BX2nR1md4\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Буковель\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 8,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Polyanytsya, Ivano-Frankivsk Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Буковель\"\r\n                },\r\n                {\r\n                    \"offset\": 10,\r\n                    \"value\": \"Polyanytsya\"\r\n                },\r\n                {\r\n                    \"offset\": 23,\r\n                    \"value\": \"Ivano-Frankivsk Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 47,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        },\r\n        {\r\n            \"description\": \"Буковель, Harbars'ka Street, Ivano-Frankivsk, Ivano-Frankivsk Oblast, Ukraine\",\r\n            \"matched_substrings\": [\r\n                {\r\n                    \"length\": 8,\r\n                    \"offset\": 0\r\n                }\r\n            ],\r\n            \"place_id\": \"ChIJVVUFJQzBMEcREJ-egcbC1Xw\",\r\n            \"reference\": \"ChIJVVUFJQzBMEcREJ-egcbC1Xw\",\r\n            \"structured_formatting\": {\r\n                \"main_text\": \"Буковель\",\r\n                \"main_text_matched_substrings\": [\r\n                    {\r\n                        \"length\": 8,\r\n                        \"offset\": 0\r\n                    }\r\n                ],\r\n                \"secondary_text\": \"Harbars'ka Street, Ivano-Frankivsk, Ivano-Frankivsk Oblast, Ukraine\"\r\n            },\r\n            \"terms\": [\r\n                {\r\n                    \"offset\": 0,\r\n                    \"value\": \"Буковель\"\r\n                },\r\n                {\r\n                    \"offset\": 10,\r\n                    \"value\": \"Harbars'ka Street\"\r\n                },\r\n                {\r\n                    \"offset\": 29,\r\n                    \"value\": \"Ivano-Frankivsk\"\r\n                },\r\n                {\r\n                    \"offset\": 46,\r\n                    \"value\": \"Ivano-Frankivsk Oblast\"\r\n                },\r\n                {\r\n                    \"offset\": 70,\r\n                    \"value\": \"Ukraine\"\r\n                }\r\n            ],\r\n            \"types\": [\r\n                \"point_of_interest\",\r\n                \"establishment\"\r\n            ]\r\n        }\r\n    ],\r\n    \"status\": \"OK\"\r\n}";
                var json = address.Length % 2 == 0 ? json2 : json3;
                return Results.Content(json2);
                //HttpClient _httpClient;
                //_httpClient = httpClientFactory.CreateClient();
                //var res = await _httpClient.GetAsync($"https://maps.googleapis.com/maps/api/place/autocomplete/json?key=AIzaSyD1PUyWjB8mr4jJVAhkADa5IrwKv4v0D58&input={address}");
                //res.EnsureSuccessStatusCode();
                //var json = await res.Content.ReadAsStringAsync();
                //return Results.Content(json);
            });
            return app;
        }

        public static WebApplication GetStreetDetails(this WebApplication app) {
            app.MapGet("/api/streetdetailsdata", async (string placeId, System.Net.Http.IHttpClientFactory httpClientFactory) =>
            {
                //HttpClient _httpClient;
                //_httpClient = httpClientFactory.CreateClient();
                //var res = await _httpClient.GetAsync($"https://maps.googleapis.com/maps/api/place/details/json?fields=geometry%2Cname%2Cformatted_phone_number&place_id=ChIJb36yJ6QN0kARIZJ55ya1q60&key=AIzaSyD1PUyWjB8mr4jJVAhkADa5IrwKv4v0D58");
                //res.EnsureSuccessStatusCode();
                //var json = await res.Content.ReadAsStringAsync();
                //return Results.Content(json);
            });
            return app;
        }
    }

}
